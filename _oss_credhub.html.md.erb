## <a id="deployment-architecture"></a> Deployment architecture

The primary architectures for CredHub are either colocated on the BOSH Director VM or
deployed and managed independently as a service. You can choose your method depending on the needs of your
organization.

### <a id="colocated"></a> Colocated deployment with BOSH Director

You can deploy CredHub on the same VM as the BOSH Director. If you need a
lightweight credential storage instance for the BOSH Director only, you might choose a colocated deployment.

This configuration does not provide high availability.

When you use a colocated deployment architecture, the BOSH Director, CredHub, UAA, and the BOSH Director database are all installed on a single BOSH VM, as shown in this diagram:

![The components colocated on the BOSH VM: BOSH Director, CredHub, UAA, and the BOSH Director database](./images/bosh-deployment.png)

For more information, see [Setting up and deploying CredHub with BOSH](setup-credhub-bosh.html).

### <a id="service"></a> Deploying as a service

You can deploy CredHub as an independent service on one or more VMs. If you need a highly available credential storage instance for multiple components in your deployment, you might choose to deploy CredHub as a service.

CredHub is a stateless app, so you can scale it to multiple instances that share a common
database cluster and encryption provider.

When you deploy CredHub as a service, the load balancer and external databases communicate
directly with the CredHub VMs, as shown in this diagram:

![Multiple CredHub VMs that connect to UAA, an HSM, an external database, and a load balancer. The load balancer connects to four consumer VMs.](./images/service-deployment.png)

